{"items":[{"updated_at":"2025-02-26T08:41:41","name":"default","fast_llm_id":null,"reranker_id":null,"created_at":"2025-02-26T08:37:01","id":1,"engine_options":{"clarify_question":false,"external_engine_config":null,"hide_sources":false,"knowledge_base":{"linked_knowledge_bases":[{"id":1}]},"knowledge_graph":{"depth":2,"enabled":true,"include_meta":false,"metadata_filter":null,"using_intent_search":true,"with_degree":false},"llm":{"clarifying_question_prompt":"---------------------\nThe prerequisite questions and their relevant knowledge for the user's main question.\n---------------------\n\n{{graph_knowledges}}\n\n---------------------\n\nTask:\nGiven the conversation between the user and ASSISTANT, along with the follow-up message from the user, and the provided prerequisite questions and relevant knowledge, determine if the user's question is clear and specific enough for a confident response. If the question lacks necessary details or context, identify the specific ambiguities and generate a clarifying question to address them.\n\nInstructions:\n1. Assess Information Sufficiency:\n   - Evaluate if the user’s question provides enough detail to generate a precise answer based on the prerequisite questions, relevant knowledge, and conversation history.\n   - If the user's question is too vague or lacks key information, identify what additional information would be necessary for clarity.\n\n2. Generate a Clarifying Question:\n   - If the question is clear and answerable, return exact \"False\" as the response.\n   - If clarification is needed, return a specific question to ask the user, directly addressing the information gap. Avoid general questions; focus on the specific details required for an accurate answer.\n\n3. Use the same language to ask the clarifying question as the user's original question.\n\nExample 1:\n\nuser: \"Does TiDB support foreign keys?\"\nRelevant Knowledge: TiDB supports foreign keys starting from version 6.6.0.\n\nResponse:\n\nWhich version of TiDB are you using?\n\nExample 2:\n\nuser: \"Does TiDB support nested transaction?\"\nRelevant Knowledge: TiDB supports nested transaction starting from version 6.2.0.\n\nResponse:\n\nWhich version of TiDB are you using?\n\nExample 3:\n\nuser: \"Does TiDB support foreign keys? I'm using TiDB 6.5.0.\"\nRelevant Knowledge: TiDB supports foreign keys starting from version 6.6.0.\n\nResponse:\n\nFalse\n\nYour Turn:\n\nChat history:\n\n{{chat_history}}\n\n---------------------\n\nFollow-up question:\n\n{{question}}\n\nResponse:\n","condense_question_prompt":"Current Date: {{current_date}}\n---------------------\nThe prerequisite questions and their relevant knowledge for the user's main question.\n---------------------\n\n{{graph_knowledges}}\n\n---------------------\n\nTask:\nGiven the conversation between the Human and Assistant, along with the follow-up message from the Human, and the provided prerequisite questions and relevant knowledge, refine the Human’s follow-up message into a standalone, detailed question.\n\nInstructions:\n1. Focus on the latest query from the Human, ensuring it is given the most weight.\n2. Incorporate Key Information:\n  - Use the prerequisite questions and their relevant knowledge to add specific details to the follow-up question.\n  - Replace ambiguous terms or references in the follow-up question with precise information from the provided knowledge. Example: Replace “latest version” with the actual version number mentioned in the knowledge.\n3. Utilize Conversation Context:\n  - Incorporate relevant context and background information from the conversation history to enhance the question's specificity.\n4. Optimize for Retrieval:\n  - Ensure the refined question emphasizes specific and relevant terms to maximize the effectiveness of a vector search for retrieving precise and comprehensive information.\n5. Grounded and Factual:\n  - Make sure the refined question is grounded in and directly based on the user's follow-up question and the provided knowledge.\n  - Do not introduce information that is not supported by the knowledge or conversation history.\n6. Give the language hint for the answer:\n  - Add a hint after the question like \"(Answer language: English)\", or \"(Answer language: Chinese)\", etc.\n  - This language hint should be exactly same with the language of the original question.\n  - If the original question has part of other language aside from English, please use the language of another language rather than English. Example: \"tidb tableread慢会是哪些原因\", it should be Chinese.\n\nExample:\n\nChat History:\n\nHuman: \"I'm interested in the performance improvements in the latest version of TiDB.\"\nAssistant: \"TiDB version 8.1 was released recently with significant performance enhancements over version 6.5.\"\n\nFollow-up Question:\n\n\"Can you tell me more about these improvements?\"\n\nPrerequisite Questions and Relevant Knowledge:\n\n- Prerequisite Question: What is the latest version of TiDB?\n- Relevant Knowledge: The latest version of TiDB is 8.1.\n\n...\n\nRefined Standalone Question:\n\n\"Can you provide detailed information about the performance improvements introduced in TiDB version 8.1 compared to version 6.5? (Answer language: English)\"\n\nYour Turn:\n\nChat history:\n\n{{chat_history}}\n\n---------------------\n\nFollowup question:\n\n{{question}}\n\n---------------------\n\nRefined standalone question:\n","further_questions_prompt":"The chat message content is:\n\n{{chat_message_content}}\n\n---------------------\nTask:\nBased on the provided chat message, generate 3–5 follow-up questions that are relevant to the content. Each question should explore the topic in greater detail, seek clarification, or introduce new angles for discussion.\n\nInstructions:\n1. Build upon the key information, themes, or insights within the provided chat message.\n2. Aim for variety in question type (clarifying, probing, or exploratory) to encourage a deeper conversation.\n3. Ensure each question logically follows from the context of the provided chat message.\n4. Keep questions concise yet insightful to maximize engagement.\n5. Use the same language with the chat message content.\n6. Each question should end with a question mark.\n7. Each question should be in a new line, DO NOT add any indexes or blank lines, just output the questions.\n\nNow, generate 3–5 follow-up questions below:\n","generate_goal_prompt":"Given the conversation history between the User and Assistant, along with the latest follow-up question from the User, perform the following tasks:\n\n1. **Language Detection**:\n    - Analyze the User's follow-up question to determine the language used.\n\n2. **Context Classification**:\n    - **Determine Relevance to TiDB**:\n        - Assess whether the follow-up question is related to TiDB products, support, or any TiDB-related context.\n    - **Set Background Accordingly**:\n        - **If Related to TiDB**:\n            - Set the background to encompass the relevant TiDB context. This may include aspects like TiDB features, configurations, best practices, troubleshooting, or general consulting related to TiDB.\n            - Example backgrounds:\n                - \"TiDB product configuration and optimization.\"\n                - \"TiDB troubleshooting and support.\"\n                - \"TiDB feature consultation.\"\n        - **If Unrelated to TiDB**:\n            - Set the background to \"Other topics.\"\n\n3. **Goal Generation**:\n    - **Clarify Intent to Avoid Ambiguity**:\n        - **Instructional Guidance**:\n            - If the User's question seeks guidance or a method (e.g., starts with \"How to\"), ensure the goal reflects a request for a step-by-step guide or best practices.\n        - **Information Retrieval**:\n            - If the User's question seeks specific information or confirmation (e.g., starts with \"Can you\" or \"Is it possible\"), rephrase it to focus on providing the requested information or verification without implying that the assistant should perform any actions.\n            - **Important**: Do not interpret these questions as requests for the assistant to execute operations. Instead, understand whether the user seeks to confirm certain information or requires a proposed solution, and restrict responses to information retrieval and guidance based on available documentation.\n    - **Reformulate the Latest User Follow-up Question**:\n        - Ensure the question is clear, directive, and suitable for a Q&A format.\n    - **Specify Additional Details**:\n        - **Detected Language**: Clearly indicate the language.\n        - **Desired Answer Format**: Specify if the answer should be in text, table, code snippet, etc.\n        - **Additional Requirements**: Include any other necessary instructions to tailor the response appropriately.\n\n4. **Output**:\n    - Produce a goal string in the following format:\n      \"[Refined Question] (Lang: [Detected Language], Format: [Format], Background: [Specified Goal Scenario])\"\n\n**Examples**:\n\n**Example 1**:\n\nChat history:\n\n[]\n\nFollow-up question:\n\n\"tidb encryption at rest 会影响数据压缩比例吗？\"\n\nGoal:\n\nDoes encryption at rest in TiDB affect the data compression ratio? (Lang: Chinese, Format: text, Background: TiDB product related consulting.)\n\n---------------------\n\n**Example 2**:\n\nChat history:\n\n[]\n\nFollow-up question:\n\n\"干嘛的？\"\n\nGoal:\n\nWhat can you do? (Lang: Chinese, Format: text, Background: General inquiry about the assistant's capabilities.)\n\n---------------------\n\n**Example 3**:\n\nChat history:\n\n[]\n\nFollow-up question:\n\n\"oracle 怎么样？\"\n\nGoal:\n\nHow is Oracle? (Lang: Chinese, Format: text, Background: Other topics.)\n\n---------------------\n\n**Example 4**:\n\nChat history:\n\n[]\n\nFollow-up question:\n\n\"Why is TiDB Serverless up to 70% cheaper than MySQL RDS? (use a table if possible)\"\n\nGoal:\n\nWhy is TiDB Serverless up to 70% cheaper than MySQL RDS? Please provide a comparison in a table format if possible. (Lang: English, Format: table, Background: Cost comparison between TiDB Serverless and MySQL RDS.)\n\n---------------------\n\n**Example 5 (Enhanced for Clarity and Guidance)**:\n\nChat history:\n\n[]\n\nFollow-up question:\n\n\"能否找到 tidb 中哪些视图的定义中包含已经被删除的表？\"\n\nGoal:\n\nHow to find which views in TiDB have definitions that include tables that have been deleted? (Lang: Chinese, Format: text, Background: TiDB product related consulting.)\n\n---------------------\n\n**Your Task**:\n\nChat history:\n\n{{chat_history}}\n\nFollow-up question:\n\n{{question}}\n\nGoal:\n","intent_graph_knowledge":"Given a list of prerequisite questions and their relevant knowledge for the user's main question, when conflicts in meaning arise, prioritize the relationship with the higher weight and the more recent version.\n\nKnowledge sub-queries:\n\n{% for sub_query, data in sub_queries.items() %}\n\nSub-query: {{ sub_query }}\n\n  - Entities:\n\n{% for entity in data['entities'] %}\n\n    - Name: {{ entity.name }}\n    - Description: {{ entity.description }}\n\n{% endfor %}\n\n  - Relationships:\n\n{% for relationship in data['relationships'] %}\n\n    - Description: {{ relationship.rag_description }}\n    - Weight: {{ relationship.weight }}\n\n{% endfor %}\n\n{% endfor %}\n","normal_graph_knowledge":"Given a list of relationships of a knowledge graph as follows. When there is a conflict in meaning between knowledge relationships, the relationship with the higher `weight` and newer `last_modified_at` value takes precedence.\n\n---------------------\nEntities:\n\n{% for entity in entities %}\n\n- Name: {{ entity.name }}\n- Description: {{ entity.description }}\n\n{% endfor %}\n\n---------------------\n\nKnowledge relationships:\n\n{% for relationship in relationships %}\n\n- Description: {{ relationship.rag_description }}\n- Weight: {{ relationship.weight }}\n- Last Modified At: {{ relationship.last_modified_at }}\n- Meta: {{ relationship.meta | tojson(indent=2) }}\n\n{% endfor %}\n","refine_prompt":"The Original questions is:\n\n{{original_question}}\n\nRefined Question used to search:\n<<query_str>>\n\n---------------------\nWe have provided an existing answer:\n---------------------\n\n<<existing_answer>>\n\n---------------------\nWe have the opportunity to refine the existing answer (only if needed) with some more knowledge graph and context information below.\n\n---------------------\nKnowledge graph information is below\n---------------------\n\n{{graph_knowledges}}\n\n---------------------\nContext information is below.\n---------------------\n\n<<context_msg>>\n\n---------------------\nGiven the new context, refine the original answer to better answer the query. If the context isn't useful, return the original answer.\nAnd the answer should use the same language with the question. If the answer has different language with the original question, please translate it to the same language with the question.\n\nRefined Answer:\n","text_qa_prompt":"Current Date: {{current_date}}\n---------------------\nKnowledge graph information is below\n---------------------\n\n{{graph_knowledges}}\n\n---------------------\nContext information is below.\n---------------------\n\n<<context_str>>\n\n---------------------\n\nAnswer Format:\n\nUse markdown footnote syntax (for example: [^1]) to indicate sources you used.\nEach footnote must correspond to a unique source. Do not use the same source for multiple footnotes.\n\n### Examples of Correct Footnote Usage (no the unique sources and diverse sources):\n[^1]: [TiDB Overview | PingCAP Docs](https://docs.pingcap.com/tidb/stable/overview)\n[^2]: [TiDB Architecture | PingCAP Docs](https://docs.pingcap.com/tidb/stable/architecture)\n\n### Examples of Incorrect Footnote Usage (Avoid duplicating the same source for multiple footnotes):\n[^1]: [TiDB Introduction | PingCAP Docs](https://docs.pingcap.com/tidb/v5.4/overview)\n[^2]: [TiDB Introduction | PingCAP Docs](https://docs.pingcap.com/tidb/v5.4/overview)\n[^3]: [TiDB Introduction | PingCAP Docs](https://docs.pingcap.com/tidb/dev/overview)\n[^4]: [TiDB Introduction | PingCAP Docs](https://docs.pingcap.com/tidb/stable/overview)\n\n---------------------\n\nAnswer Language:\n\nFollow the language of the language hint after the Refined Question.\nIf the language hint is not provided, use the language that the original questions used.\n\n---------------------\n\nAs a customer support assistant, please do not fabricate any knowledge. If you cannot get knowledge from the context, please just directly state \"you do not know\", rather than constructing nonexistent and potentially fake information!!!\n\nFirst, analyze the provided context information without assuming prior knowledge. Identify all relevant aspects of knowledge contained within. Then, from various perspectives and angles, answer questions as thoroughly and comprehensively as possible to better address and resolve the user's issue.\n\nThe Original questions is:\n\n{{original_question}}\n\nThe Refined Question used to search:\n<<query_str>>\n\nAnswer:\n"},"post_verification_token":null,"post_verification_url":null,"refine_question_with_kg":true,"vector_search":{"metadata_filter":null,"oversampling_factor":5,"reranker":null,"similarity_top_k":null,"top_k":10}},"llm_id":null,"is_default":true,"deleted_at":null},{"updated_at":"2025-02-26T08:45:38","name":"abc","fast_llm_id":null,"reranker_id":null,"created_at":"2025-02-26T08:45:38","id":2,"engine_options":{"knowledge_base":{"linked_knowledge_bases":[{"id":2}]}},"llm_id":null,"is_default":false,"deleted_at":null}],"total":2,"page":1,"size":100,"pages":1}